---
import { getAllCabins } from "../../api/cabins/getAllCabins";
import Mountain from "../svgs/Mountain.astro";

const cabins = await getAllCabins();
---

<div class="separator">
  <div class="line"></div>
  <Mountain />
  <div class="line"></div>

</div>
<h2>All Cabins</h2>
<div class="cabins">
  {
    cabins.map((cabin) => {
      // console.log(cabin);
      const {
        name,
        currencySymbol,
        type,
        baseDailyRate,
        maximumGuests: guestsMax,
        baseGuests: guestsMin,
        bedrooms,
        bathrooms,
        picture,
        propertyURL,
        isActive,
      } = cabin;
      if (!isActive) return null;
      return (
        <div class="cabin wrapper">
          <img src={picture} alt={`picture of ${name}`} />
          <div class="info">
            <h3>{name}</h3>

            <div class="detail">
              <div class="basic">
                <p class="size">
                  <b>Size -</b> {bedrooms}{" "}
                  {bedrooms > 1 ? "bedrooms" : "bedroom"} • {bathrooms}{" "}
                  {+bathrooms > 1 ? "bathrooms" : "bathroom"} • Sleeps{" "}
                  {guestsMin != guestsMax
                    ? guestsMin + "-" + guestsMax
                    : guestsMax}
                </p>
                <p class="amenities">
                  <b>Amenities</b> Parking • Jacuzzi • Private Entrance •
                  Amazing Views
                </p>
              </div>
              <p>
                Located along the historic Paiute Trail in Utah’s Tushar
                Mountains, in the Eagle Point Ski Resort off of Hwy 153, our
                Mountain Cabins Utah Condos are true diamonds in the most
                spectacular rough!...
              </p>
            </div>

            <button>
              {" "}
              <a href={propertyURL}>Detail</a>
            </button>
          </div>
        </div>
      );
    })
  }
</div>

<style>
  .separator {
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 24px;

    padding: 0px;
    margin: 48px 0px;
  }

  .separator .line{
    border-bottom: 3px solid rgba(0, 0, 0, 0.75);
    height: 20px;
    width: 100%;

  }

  .cabins {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 64px 0px;
    gap: 40px;
  }

  .cabin {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 8px;
  }

  .cabin .detail {
    display: flex;
    flex-direction: column;
    align-items: flex-start;

    gap: 8px;
  }

  .cabin img {
    box-sizing: border-box;
    min-width: 400px;
    max-width: 400px;
    aspect-ratio: 4/3;

    border: 12px solid #f4f9f4;
    /* Shadow */

    filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.2));
  }

  .cabin .info {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 24px;
    gap: 16px;
  }

  .info .header {
    /* Auto layout */
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }

  .header h3 {
    text-align: left;
  }

  .basic .size {
    font-family: var(--font-heading);
    font-size: 14px;
  }

  .basic .amenities {
    font-size: 12px;
  }

  .cabin button {
    border: 2px solid var(--primary-900);
    background-color: rgba(255, 255, 255, 0);
    color: var(--primary-900);
  }

  .cabin button:hover {
    background-color: rgba(39, 64, 40, 0.15);
  }

  /* RESPONSIVE */
  @media only screen and (max-width: 1024px) {
    .cabin img {
      box-sizing: border-box;
      min-width: 300px;
      max-width: 300px;
      aspect-ratio: 1/1;

      border: 8px solid #f4f9f4;
    }
  }

  @media only screen and (max-width: 845px) {
    .cabins {
      padding: 64px 24px;
    }

    .cabin {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;

      border: 0.5px solid var(--secondary-400);
    }

    .cabin img {
      box-sizing: border-box;
      min-width: 400px;
      max-width: 400px;
      aspect-ratio: 2/1;

      border: 12px solid #f4f9f4;
      margin-top: 24px;
    }

    .cabin .info {
      max-width: 600px;
    }

    .header h3 {
      text-align: center;
    }

    .cabin button {
      align-self: center;
    }
  }

  @media only screen and (max-width: 480px) {
    .cabin img {
      box-sizing: border-box;
      min-width: 250px;
      max-width: 250px;
    }
  }
</style>
